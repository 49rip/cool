// Function to handle the IP address response
function getIP(response) {
  var ip = response.ip;
  sendMessage(ip);
}

// Function to send the message and IP address
function sendMessage(ip) {
  var message = $("#message-input").val();
  var data = {
    "content": message + " (Visitor IP: " + ip + ")"
  };
  $.ajax({
    type: "POST",
    url: "https://discord.com/api/webhooks/1159170951217422459/BDbsM_GEvj7ZOEsCeCcrSjQL9LsE11QUGIXC0lXOk9qOsEr2sGAu224uxz3kWe7lAtZh",
    data: JSON.stringify(data),
    contentType: "application/json",
    success: function () {
      alert("Message sent successfully!");
    },
    error: function () {
      alert("Message sending failed. Please try again later.");
    }
  });
}

$(document).ready(function () {
  $("#send-btn").click(function () {
    // Fetch the IP address
    getIP();
  });
});
